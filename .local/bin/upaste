#!/bin/sh -euf

usage() {
	echo "Example: upaste [-t js] [test.js]"
	echo "Reads from stdin if no filename is supplied."
}

while getopts 'ht:' o; do
	case "$o" in
	h)
		usage
		exit
		;;
	t)
		type="$OPTARG"
		;;
	*)
		usage
		exit 1
		;;
	esac
done
shift $((OPTIND-1))

curl -F text=@"${1:--}" ${type:+"-F type=$type"} https://upaste.de/
