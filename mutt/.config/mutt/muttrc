set folder = "~/.mail"
source ~/.config/mutt/mailboxes

set mailcap_path = ~/.config/mutt/mailcap
alternative_order text/plain text/enriched text/html
auto_view text/html

set my_name = "Greg Anders"
set realname = $my_name
set editor = `echo \$EDITOR`
set use_from = yes
set envelope_from = yes
set sendmail = msmtp
set edit_headers = yes

set alias_file = ~/.config/mutt/aliases
set sort_alias = alias
set reverse_alias = yes
source $alias_file

set nm_default_uri = "notmuch://$HOME/.mail"
set nm_record = yes
set nm_record_tags = "-inbox,-unread,+archive,+sent"
set nm_unread_tag = "unread"

macro index \\ "<vfolder-from-query>"
# macro index,pager A "<save-message>=Archive\n<sync-mailbox>" "Archive message"
macro index,pager X "<change-vfolder>?" "Change to vfolder overview"
bind index,pager + entire-thread
bind index < vfolder-window-backward
bind index > vfolder-window-forward

source ~/.config/mutt/config.default
source ~/.config/mutt/config.sidebar

# Colorscheme
source ~/.config/mutt/colors/one-dark.muttrc

folder-hook .          source ~/.config/mutt/config.default
folder-hook "Personal" source ~/.config/mutt/config.personal
folder-hook "Gmail"    source ~/.config/mutt/config.gmail

# Set up notmuch virtual mailboxes
set virtual_spoolfile = no

virtual-mailboxes "Inbox" "notmuch://?query=tag:inbox and not tag:archive"
virtual-mailboxes "Archive" "notmuch://?query=tag:archive"
virtual-mailboxes "Sent" "notmuch://?query=tag:sent"
virtual-mailboxes "Trash" "notmuch://?query=tag:trash"

# Use Personal mailbox as default
source ~/.config/mutt/config.personal
