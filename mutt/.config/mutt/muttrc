# Greg Anders (gpanders)'s muttrc <https://github.com/gpanders/dotfiles.git>

set folder = ~/.mail
source ~/.config/mutt/mailboxes

# Settings for handling MIME types
set mailcap_path = ~/.config/mutt/mailcap
alternative_order text/plain text/enriched text/html
auto_view text/html
auto_view text/x-diff
auto_view text/x-patch
set allow_ansi

set realname = "Greg Anders"
set editor = `echo \$EDITOR`
set use_from = yes
set use_envelope_from = yes

# Skip to compose when replying
set fast_reply

# Format of subject when forwarding
set forward_format = "Fwd: %s"

# Decode when forwarding
set forward_decode

# Format of quoting header
set attribution = "On %d, %n wrote:"

# Reply to Reply to: field
set reply_to

# Reply as whomever it was to
set reverse_name

# Include message in replies
set include

# Include message in forwards
set forward_quote

# Time before Mutt gives up waiting for user input (default is 600)
set timeout = 10

# Force UTF-8
set send_charset = "utf-8"

# Require that all connections to remote servers be encyrpted
set ssl_force_tls = yes

# Allow headers to be editable
set edit_headers = yes

# Enable text_flowed formatting
set text_flowed

# Don't mark messages as "old" if they're still unread
set mark_old = no

# Don't ask to append messages to a mailbox
set confirmappend = no

# Don't ask to delete messages, just do it
set delete = yes

# Automatically apply actions to all tagged messages. This is how most modern
# email clients work anyway
set auto_tag = yes

# Ignore all headers except the ones listed
ignore *
unignore from: to: cc: date: subject:

# Reset header order
unhdr_order *
hdr_order from: to: cc: date: subject:

# Index view options
set date_format = "%m/%d"
set index_format = "[%Z]  %D  %-20.20L  %s"
set sort = threads
set sort_aux = reverse-last-date-received
set sort_re
set reply_regexp = "^(([Rr][Ee]?(\[[0-9]+\])?: *)?(\[[^]]+\] *)?)*"
set pager_index_lines = 10
set pager_context = 3
set pager_stop
set menu_scroll

# Pad bottom of pager with tildes (like vim)
set tilde

# Don't show + signs for wrapped lines
unset markers

set quote_regexp = "^( {0,4}[>|:#%]| {0,4}[a-z0-9]+[>|]+)+"
alternative_order text/plain text/enriched text/html

set alias_file = ~/.config/mutt/aliases
set sort_alias = alias
set reverse_alias = yes
source $alias_file

# Mailing Lists
source ~/.config/mutt/lists

# Colorized diffs and patches
source ~/.config/mutt/diffs

# Store message headers locally to speed things up.  If hcache is a folder,
# Mutt will create sub cache folders for each account which may speeds things
# up even more.
set header_cache = ~/.cache/mutt/headers

# Store messages locally to speed things up, like searching message bodies.
# Can be the same folder as header_cache.
# This will cost important disk usage according to your e-mail amount.
set message_cachedir = ~/.cache/mutt/messages

# Where to store certificates
set certificate_file = ~/.config/mutt/certificates

# Set status bar
set status_chars = " *%A"
set status_format = "───[ Folder: %f ]───[%r%m messages%?n? (%n new)?%?d? (%d to delete)?%?t? (%t tagged)? ]───%>─%?p?( %p postponed )?───"

# Allow Mutt to open a new IMAP connection automatically
unset imap_passive

# Keep the IMAP connection alive by polling intermittently (time in seconds)
set imap_keepalive = 300

# How often to check for new mail (time in seconds)
set mail_check = 60

# Colorscheme
source ~/.config/mutt/colors/base16.muttrc

# Bindings
source ~/.config/mutt/bindings

# Sidebar
source ~/.config/mutt/sidebar

# Set up notmuch virtual mailboxes
# ifdef notmuch 'source ~/.config/mutt/notmuch'

source ~/.config/mutt/config.gmail
folder-hook $folder source ~/.config/mutt/config.gmail

source ~/.config/mutt/config.gpanders
folder-hook $folder source ~/.config/mutt/config.gpanders

# vim: ft=neomuttrc
